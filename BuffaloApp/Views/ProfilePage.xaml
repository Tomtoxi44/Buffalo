<?xml version="1.0" encoding="utf-8" ?>
<ContentPage xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
             xmlns:vm="clr-namespace:BuffaloApp.ViewModels"
             x:Class="BuffaloApp.Views.ProfilePage"
             x:DataType="vm:ProfileViewModel"
             Title="Mon Profil"
             BackgroundColor="{AppThemeBinding Light={StaticResource LightBackground}, Dark={StaticResource DarkBackground}}">

    <ScrollView>
        <VerticalStackLayout Padding="20" Spacing="20">
            
            <!-- Avatar et pseudo -->
            <Frame BackgroundColor="{AppThemeBinding Light={StaticResource LightCardBg}, Dark={StaticResource DarkCardBg}}" 
                   CornerRadius="15" 
                   Padding="30"
                   BorderColor="Transparent"
                   HorizontalOptions="Center"
                   HasShadow="True">
                <Frame.Shadow>
                    <Shadow Brush="{AppThemeBinding Light=#40000000, Dark=Transparent}" 
                            Offset="0,2" 
                            Radius="8" 
                            Opacity="0.15"/>
                </Frame.Shadow>
                <VerticalStackLayout HorizontalOptions="Center" Spacing="15">
                    <Frame BackgroundColor="{StaticResource BuffaloRed}" 
                           CornerRadius="50" 
                           WidthRequest="100" 
                           HeightRequest="100"
                           Padding="0"
                           BorderColor="Transparent"
                           HorizontalOptions="Center">
                        <Label Text="ðŸ¦¬" 
                               FontSize="48" 
                               VerticalOptions="Center"
                               HorizontalOptions="Center"/>
                    </Frame>
                    
                    <Entry Text="{Binding Pseudo}" 
                           Placeholder="Ton pseudo"
                           FontSize="24"
                           FontAttributes="Bold"
                           TextColor="{AppThemeBinding Light={StaticResource LightTextPrimary}, Dark={StaticResource DarkTextPrimary}}"
                           PlaceholderColor="{AppThemeBinding Light={StaticResource LightTextSecondary}, Dark={StaticResource DarkTextSecondary}}"
                           HorizontalTextAlignment="Center"
                           BackgroundColor="Transparent"/>
                </VerticalStackLayout>
            </Frame>

            <!-- Mode sombre/clair -->
            <Frame BackgroundColor="{AppThemeBinding Light={StaticResource LightCardBg}, Dark={StaticResource DarkCardBg}}" 
                   CornerRadius="15" 
                   Padding="20"
                   BorderColor="Transparent"
                   HasShadow="True">
                <Frame.Shadow>
                    <Shadow Brush="{AppThemeBinding Light=#40000000, Dark=Transparent}" 
                            Offset="0,2" 
                            Radius="8" 
                            Opacity="0.15"/>
                </Frame.Shadow>
                <Grid ColumnDefinitions="*,Auto">
                    <VerticalStackLayout>
                        <Label Text="ðŸŒ“ ThÃ¨me de l'application" 
                               FontSize="16" 
                               FontAttributes="Bold"
                               TextColor="{AppThemeBinding Light={StaticResource LightTextPrimary}, Dark={StaticResource DarkTextPrimary}}"/>
                        <Label Text="{Binding IsDarkMode, Converter={StaticResource BoolToThemeTextConverter}}" 
                               FontSize="14" 
                               TextColor="{AppThemeBinding Light={StaticResource LightTextSecondary}, Dark={StaticResource DarkTextSecondary}}"/>
                    </VerticalStackLayout>
                    
                    <Switch Grid.Column="1"
                            IsToggled="{Binding IsDarkMode}"
                            OnColor="{StaticResource BuffaloPurple}"
                            ThumbColor="White"
                            VerticalOptions="Center"
                            Toggled="OnThemeToggled"/>
                </Grid>
            </Frame>

            <!-- Main dominante -->
            <Frame BackgroundColor="{AppThemeBinding Light={StaticResource LightCardBg}, Dark={StaticResource DarkCardBg}}" 
                   CornerRadius="15" 
                   Padding="20"
                   BorderColor="Transparent"
                   HasShadow="True">
                <Frame.Shadow>
                    <Shadow Brush="{AppThemeBinding Light=#40000000, Dark=Transparent}" 
                            Offset="0,2" 
                            Radius="8" 
                            Opacity="0.15"/>
                </Frame.Shadow>
                <Grid ColumnDefinitions="*,Auto">
                    <VerticalStackLayout>
                        <Label Text="Main dominante" 
                               FontSize="16" 
                               FontAttributes="Bold"
                               TextColor="{AppThemeBinding Light={StaticResource LightTextPrimary}, Dark={StaticResource DarkTextPrimary}}"/>
                        <Label Text="{Binding DominantHand}" 
                               FontSize="14" 
                               TextColor="{AppThemeBinding Light={StaticResource LightTextSecondary}, Dark={StaticResource DarkTextSecondary}}"/>
                        <Label Text="(Tu dois boire avec l'AUTRE main !)" 
                               FontSize="12" 
                               TextColor="{StaticResource BuffaloRed}"
                               FontAttributes="Italic"/>
                    </VerticalStackLayout>
                    
                    <Button Grid.Column="1"
                            Text="{Binding IsRightHanded, Converter={StaticResource BoolToHandEmojiConverter}}"
                            FontSize="32"
                            BackgroundColor="{AppThemeBinding Light={StaticResource LightCardSecondary}, Dark={StaticResource DarkCardSecondary}}"
                            CornerRadius="10"
                            WidthRequest="60"
                            HeightRequest="60"
                            Command="{Binding ToggleHandCommand}"/>
                </Grid>
            </Frame>

            <!-- Statistiques -->
            <Frame BackgroundColor="{AppThemeBinding Light={StaticResource LightCardBg}, Dark={StaticResource DarkCardBg}}" 
                   CornerRadius="15" 
                   Padding="20"
                   BorderColor="Transparent"
                   HasShadow="True">
                <Frame.Shadow>
                    <Shadow Brush="{AppThemeBinding Light=#40000000, Dark=Transparent}" 
                            Offset="0,2" 
                            Radius="8" 
                            Opacity="0.15"/>
                </Frame.Shadow>
                <VerticalStackLayout Spacing="15">
                    <Label Text="ðŸ“Š Mes statistiques" 
                           FontSize="18" 
                           FontAttributes="Bold"
                           TextColor="{AppThemeBinding Light={StaticResource LightTextPrimary}, Dark={StaticResource DarkTextPrimary}}"/>
                    
                    <Grid ColumnDefinitions="*,*" RowDefinitions="Auto,Auto" RowSpacing="15" ColumnSpacing="15">
                        <Frame BackgroundColor="{AppThemeBinding Light={StaticResource LightCardSecondary}, Dark={StaticResource DarkCardSecondary}}" 
                               CornerRadius="10" 
                               Padding="15" 
                               BorderColor="Transparent"
                               HasShadow="True">
                            <Frame.Shadow>
                                <Shadow Brush="{AppThemeBinding Light=#40000000, Dark=Transparent}" 
                                        Offset="0,2" 
                                        Radius="6" 
                                        Opacity="0.1"/>
                            </Frame.Shadow>
                            <VerticalStackLayout HorizontalOptions="Center">
                                <Label Text="{Binding BuffaloGiven}" 
                                       FontSize="32" 
                                       FontAttributes="Bold"
                                       TextColor="{StaticResource BuffaloGreen}"
                                       HorizontalOptions="Center"/>
                                <Label Text="Buffalo donnÃ©s" 
                                       FontSize="12" 
                                       TextColor="{AppThemeBinding Light={StaticResource LightTextSecondary}, Dark={StaticResource DarkTextSecondary}}"
                                       HorizontalOptions="Center"/>
                            </VerticalStackLayout>
                        </Frame>
                        
                        <Frame Grid.Column="1" 
                               BackgroundColor="{AppThemeBinding Light={StaticResource LightCardSecondary}, Dark={StaticResource DarkCardSecondary}}" 
                               CornerRadius="10" 
                               Padding="15" 
                               BorderColor="Transparent"
                               HasShadow="True">
                            <Frame.Shadow>
                                <Shadow Brush="{AppThemeBinding Light=#40000000, Dark=Transparent}" 
                                        Offset="0,2" 
                                        Radius="6" 
                                        Opacity="0.1"/>
                            </Frame.Shadow>
                            <VerticalStackLayout HorizontalOptions="Center">
                                <Label Text="{Binding BuffaloReceived}" 
                                       FontSize="32" 
                                       FontAttributes="Bold"
                                       TextColor="{StaticResource BuffaloRed}"
                                       HorizontalOptions="Center"/>
                                <Label Text="Buffalo reÃ§us" 
                                       FontSize="12" 
                                       TextColor="{AppThemeBinding Light={StaticResource LightTextSecondary}, Dark={StaticResource DarkTextSecondary}}"
                                       HorizontalOptions="Center"/>
                            </VerticalStackLayout>
                        </Frame>
                    </Grid>
                </VerticalStackLayout>
            </Frame>

            <!-- Info membre -->
            <Frame BackgroundColor="{AppThemeBinding Light={StaticResource LightCardBg}, Dark={StaticResource DarkCardBg}}" 
                   CornerRadius="15" 
                   Padding="20"
                   BorderColor="Transparent"
                   HasShadow="True">
                <Frame.Shadow>
                    <Shadow Brush="{AppThemeBinding Light=#40000000, Dark=Transparent}" 
                            Offset="0,2" 
                            Radius="8" 
                            Opacity="0.15"/>
                </Frame.Shadow>
                <HorizontalStackLayout Spacing="10">
                    <Label Text="ðŸ“…" FontSize="20"/>
                    <Label Text="{Binding MemberSince}" 
                           FontSize="14" 
                           TextColor="{AppThemeBinding Light={StaticResource LightTextSecondary}, Dark={StaticResource DarkTextSecondary}}"
                           VerticalOptions="Center"/>
                </HorizontalStackLayout>
            </Frame>

            <!-- Bouton sauvegarder -->
            <Button Text="ðŸ’¾ Sauvegarder"
                    BackgroundColor="{StaticResource BuffaloGreen}"
                    TextColor="White"
                    FontAttributes="Bold"
                    FontSize="16"
                    CornerRadius="10"
                    Padding="20,15"
                    Command="{Binding SaveProfileCommand}"/>

        </VerticalStackLayout>
    </ScrollView>
</ContentPage>
