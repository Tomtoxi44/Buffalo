<?xml version="1.0" encoding="utf-8" ?>
<ContentPage xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
             xmlns:vm="clr-namespace:BuffaloApp.ViewModels"
             x:Class="BuffaloApp.Views.RulesPage"
             x:DataType="vm:RulesViewModel"
             Title="RÃ¨gles du Buffalo"
             BackgroundColor="{AppThemeBinding Light={StaticResource LightBackground}, Dark={StaticResource DarkBackground}}">

    <ScrollView>
        <VerticalStackLayout Padding="20" Spacing="15">
            
            <!-- Titre -->
            <Frame BackgroundColor="{StaticResource BuffaloRed}" 
                   CornerRadius="15" 
                   Padding="20"
                   BorderColor="Transparent">
                <VerticalStackLayout HorizontalOptions="Center">
                    <Label Text="ðŸ¦¬" FontSize="64" HorizontalOptions="Center"/>
                    <Label Text="LE BUFFALO" 
                           FontSize="28" 
                           FontAttributes="Bold"
                           TextColor="White"
                           HorizontalOptions="Center"/>
                    <Label Text="Les rÃ¨gles officielles" 
                           FontSize="14" 
                           TextColor="White"
                           Opacity="0.8"
                           HorizontalOptions="Center"/>
                </VerticalStackLayout>
            </Frame>

            <!-- Liste des rÃ¨gles -->
            <CollectionView ItemsSource="{Binding Rules}">
                <CollectionView.ItemTemplate>
                    <DataTemplate x:DataType="vm:RuleItem">
                        <Frame BackgroundColor="{AppThemeBinding Light={StaticResource LightCardBg}, Dark={StaticResource DarkCardBg}}" 
                               CornerRadius="15" 
                               Padding="20"
                               Margin="0,5"
                               BorderColor="Transparent"
                               HasShadow="True">
                            <Frame.Shadow>
                                <Shadow Brush="Black"
                                        Offset="0,2"
                                        Radius="8"
                                        Opacity="0.1" />
                            </Frame.Shadow>
                            <Grid ColumnDefinitions="Auto,*" ColumnSpacing="15">
                                <Frame BackgroundColor="{AppThemeBinding Light={StaticResource LightCardSecondary}, Dark={StaticResource DarkCardSecondary}}" 
                                       CornerRadius="25" 
                                       WidthRequest="50" 
                                       HeightRequest="50"
                                       Padding="0"
                                       BorderColor="Transparent"
                                       VerticalOptions="Start">
                                    <Label Text="{Binding Icon}" 
                                           FontSize="24" 
                                           VerticalOptions="Center"
                                           HorizontalOptions="Center"/>
                                </Frame>
                                
                                <VerticalStackLayout Grid.Column="1" Spacing="5">
                                    <Label FontSize="12" TextColor="{StaticResource BuffaloRed}">
                                        <Label.FormattedText>
                                            <FormattedString>
                                                <Span Text="RÃˆGLE " FontAttributes="Bold"/>
                                                <Span Text="{Binding Number}" FontAttributes="Bold"/>
                                            </FormattedString>
                                        </Label.FormattedText>
                                    </Label>
                                    <Label Text="{Binding Title}" 
                                           FontSize="18" 
                                           FontAttributes="Bold"
                                           TextColor="{AppThemeBinding Light={StaticResource LightTextPrimary}, Dark={StaticResource DarkTextPrimary}}"/>
                                    <Label Text="{Binding Description}" 
                                           FontSize="14" 
                                           TextColor="{AppThemeBinding Light={StaticResource LightTextSecondary}, Dark={StaticResource DarkTextSecondary}}"
                                           LineBreakMode="WordWrap"/>
                                </VerticalStackLayout>
                            </Grid>
                        </Frame>
                    </DataTemplate>
                </CollectionView.ItemTemplate>
            </CollectionView>

            <!-- Note importante -->
            <Frame BackgroundColor="{StaticResource BuffaloYellow}" 
                   CornerRadius="15" 
                   Padding="20"
                   BorderColor="Transparent">
                <Label Text="{Binding ImportantNote}" 
                       FontSize="14" 
                       TextColor="{AppThemeBinding Light={StaticResource LightTextPrimary}, Dark=#1a1a2e}"
                       LineBreakMode="WordWrap"/>
            </Frame>

            <!-- Footer -->
            <Label Text="Buvez responsablement ðŸº" 
                   FontSize="12" 
                   TextColor="{AppThemeBinding Light={StaticResource LightTextSecondary}, Dark={StaticResource DarkTextSecondary}}"
                   HorizontalOptions="Center"
                   Margin="0,10,0,20"/>

        </VerticalStackLayout>
    </ScrollView>
</ContentPage>
